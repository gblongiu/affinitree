<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affinitree</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        html, body, #affinitree-plot {
            width: 100vw;
            height: 100vh;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="affinitree-plot"></div>
    <div id="radial-chart-container"></div>
    <script id="plot-data" type="application/json">{fig.to_json()}</script>
    <script src="affinitree.js"></script>
    <script src="display_radial.js"></script>
</body>
</html>


display_radial.js

document.addEventListener('DOMContentLoaded', function () {
  const plotElement = document.getElementById('affinitree-plot');

  if (plotElement) {
    plotElement.on('plotly_click', function (data) {
      const pointIndex = data.points[0].pointIndex;
      const encodedImage = data.points[0].customdata;

      // create_radial_bar_chart function should be called here
      const imgData = "data:image/png;base64," + encodedImage;

      const img = document.createElement('img');
      img.src = imgData;

      // Resize image based on device and orientation
      if (window.innerWidth < 1024) { // Mobile devices
        if (window.innerWidth > window.innerHeight) { // Landscape orientation
          img.style.width = '70%';
        } else { // Portrait orientation
          img.style.width = '90%';
        }
      } else { // Desktop devices
        img.style.width = '900px';
      }

      const radialChartContainer = document.getElementById('radial-chart-container');
      radialChartContainer.innerHTML = ''; // Clear previous radial chart
      radialChartContainer.appendChild(img);
    });

    // Resize radial chart on orientation change
    window.addEventListener('resize', function () {
      const img = document.querySelector('#radial-chart-container img');
      if (img) {
        if (window.innerWidth < 1024) { // Mobile devices
          if (window.innerWidth > window.innerHeight) { // Landscape orientation
            img.style.width = '70%';
          } else { // Portrait orientation
            img.style.width = '90%';
          }
        } else { // Desktop devices
          img.style.width = '900px';
        }
      }
    });
  }
});